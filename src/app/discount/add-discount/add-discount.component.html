
<div id="newsadd">
  <form #productAddForm="ngForm" [formGroup]="infoNew">
    <ng-template #content let-c="close" let-d="dismiss">
      <div class="modal-header">
        <h4 class="modal-title">Thêm  khuyến mãi</h4>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <app-message></app-message>
        <div *ngIf="saving" class="m-auto">
          <h1 class="text-center display-3 mt-5">
            <i class="fas fa-spinner fa spin"></i> </h1>
        </div>
        <div class="row">
          <div class="col-md-12">
            <div class="form-group">
              <label class="bmd-label-floating">Tên khuyến mãi</label>
              <input
                type="text" name="name" id="name"
                [(ngModel)]="discount.name"
                formControlName="name"
                class="form-control"
              />
              <small id="nameBrandHelp" class="form-text text-muted err"  *ngIf="!infoNew.get('name')?.valid && infoNew.get('name')?.touched " >
                <i class="fa fa-times-circle" style="color:firebrick;"></i>
                 vui lòng nhập tên khuyến mãi</small>
                 <i class="fa fa-check-circle" style="color:green;" *ngIf="infoNew.controls.name.valid"></i>
            </div>
          </div>
          <div class="col-md-12">
            <div class="form-group">
              <label class="bmd-label-floating">Mã khuyến mãi</label>
              <input
                type="text" name="code" id="code"
                [(ngModel)]="discount.code"
                formControlName="code"
                class="form-control"
              />
              <small id="nameBrandHelp" class="form-text text-muted err"  *ngIf="!infoNew.get('code')?.valid && infoNew.get('code')?.touched " >
                <i class="fa fa-times-circle" style="color:firebrick;"></i>
                 vui lòng nhập mã khuyến mãi</small>
                 <i class="fa fa-check-circle" style="color:green;" *ngIf="infoNew.controls.code.valid"></i>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <div class="form-group">
              <label class="bmd-label-floating">Mô tả</label>
              <textarea style="height: 200px;"
              type="text" name="description" id="description"
              [(ngModel)]="discount.description"
              formControlName="description"
              class="form-control"
            ></textarea>
            <small id="nameBrandHelp" class="form-text text-muted err"  *ngIf="!infoNew.get('description')?.valid && infoNew.get('description')?.touched " >
              <i class="fa fa-times-circle" style="color:firebrick;"></i>
               vui lòng nhập mô tả</small>
               <i class="fa fa-check-circle" style="color:green;" *ngIf="infoNew.controls.description.valid"></i>
            </div>
          </div>
          </div>
          <div class="row">
          <div class="col-md-4">
            <div class="form-group">
              <label class="bmd-label-floating">Thương hiệu</label>
              <select name="brand" id="brand" formControlName="brand" [(ngModel)]="discount.brand"
                class="custom-select mb-3">
                <option *ngFor="let item of brands" [value]="item.nameBrand">{{item.nameBrand}}</option>
              </select>
              <small id="nameBrandHelp" class="form-text text-muted err"
                *ngIf="!infoNew.get('brand')?.valid && infoNew.get('brand')?.touched ">
                <i class="fa fa-times-circle" style="color:firebrick;"></i>
                vui lòng chọn thương hiệu</small>
              <i class="fa fa-check-circle" style="color:green;" *ngIf="infoNew.controls.brand.valid"></i>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label class="bmd-label-floating">Số lượng</label>
              <input
                type="number" name="amount" id="amount"
                [(ngModel)]="discount.amount"
                formControlName="amount"
                class="form-control"
              />
              <small id="nameBrandHelp" class="form-text text-muted err"  *ngIf="!infoNew.get('amount')?.valid && infoNew.get('amount')?.touched " >
                <i class="fa fa-times-circle" style="color:firebrick;"></i>
                 vui lòng nhập số lượng mã</small>
              <i class="fa fa-check-circle" style="color:green;" *ngIf="infoNew.controls.description.valid"></i>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label class="bmd-label-floating">Discount</label>
                <select
                name="discount" id="discount"
                [(ngModel)]="discount.discount"
                formControlName="discount"
                class="custom-select mb-3"
              >
                <option value=5 selected>5%</option>
                <option value=10>10%</option>
                <option value=15>15%</option>
              </select>
                <small id="nameBrandHelp" class="form-text text-muted err"  *ngIf="!infoNew.get('discount')?.valid && infoNew.get('discount')?.touched " >
                  <i class="fa fa-times-circle" style="color:firebrick;"></i>
                   vui lòng chọn discount</small>
                   <i class="fa fa-check-circle" style="color:green;" *ngIf="infoNew.controls.description.valid"></i>
            </div>
          </div>
          </div>
          <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label class="bmd-label-floating">Ngày đăng bài</label>
              <input
                type="date" name="starDay" id="starDay"
                [(ngModel)]="discount.starDay"
                formControlName="starDay"
                class="form-control"
              />
              <small id="nameBrandHelp" class="form-text text-muted err"  *ngIf="!infoNew.get('starDay')?.valid && infoNew.get('starDay')?.touched " >
                <i class="fa fa-times-circle" style="color:firebrick;"></i>
                 vui lòng nhập ngày bắt đầu</small>
                 <i class="fa fa-check-circle" style="color:green;" *ngIf="infoNew.controls.starDay.valid"></i>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label class="bmd-label-floating">Ngày gỡ bài đăng</label>
              <input
                type="date" name="endDay" id="endDay"
                [(ngModel)]="discount.endDay"
                [min]="discount.starDay"
                formControlName="endDay"
                class="form-control"
              />
              <small id="nameBrandHelp" class="form-text text-muted err"  *ngIf="!infoNew.get('endDay')?.valid && infoNew.get('endDay')?.touched " >
                <i class="fa fa-times-circle" style="color:firebrick;"></i>
                 vui lòng ngày kết thúc</small>
                 <i class="fa fa-check-circle" style="color:green;" *ngIf="infoNew.controls.endDay.valid"></i>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <label class="bmd-label-floating">Trạng thái</label>
            <select
              name="state" id="state"
              [(ngModel)]="discount.state"
              formControlName="state"
              class="custom-select mb-3"
            >
              <option value="cho" selected>Chờ</option>
              <option value="dang">Đã đăng</option>
              <option value="kt">Kết thúc</option>
            </select>
              <small id="nameBrandHelp" class="form-text text-muted err"  *ngIf="!infoNew.get('state')?.valid && infoNew.get('state')?.touched " >
                <i class="fa fa-times-circle" style="color:firebrick;"></i>
                 vui lòng chọn trạng thái</small>
                 <i class="fa fa-check-circle" style="color:green;" *ngIf="infoNew.controls.state.valid"></i>
          </div>

      </div>
      </div>
      <app-message></app-message>
      <div class="modal-footer" *ngIf="infoNew.valid">
        <button type="submit" class="btn btn-primary pull-right" (click)="save()">Thêm</button>
        <button type="button" class="btn btn-secondary" (click)="c('Close click')">Close</button>
      </div>
    </ng-template>
    <button class="btn btn-lg btn-outline-primary" (click)="open(content)">THÊM KHUYẾN MÃI</button>
  </form>
</div>
